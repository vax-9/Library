var e=globalThis,t={},r={},n=e.parcelRequire4451;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},e.parcelRequire4451=n),(0,n.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>r,set:e=>r=e,enumerable:!0,configurable:!0});var r,n=new Map;r=function(e,t){for(var r=0;r<t.length-1;r+=2)n.set(t[r],{baseUrl:e,path:t[r+1]})}}),n("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["krNw4","index.04765434.js","jY698","alert.4dd59341.svg"]'));var o={};o=new URL("alert.4dd59341.svg",import.meta.url).toString();const a=document.getElementById("default-search"),l=document.getElementById("search-button"),i=document.getElementById("search-result");async function d(){let e=[];for(;i.firstChild;)i.removeChild(i.firstChild);return await fetch(`https://openlibrary.org/subjects/${a.value.toLowerCase()}.json?limit=18`).then(e=>e.json()).then(t=>{t.works.forEach((t,r)=>{let n=[];t.authors.forEach(e=>{n.push(e.name)}),e[r]={title:t.title,authors:n,year:t.first_publish_year,key:t.key,coverId:t.cover_id}})}),e}async function s(e){await fetch(`https://openlibrary.org${e.key}.json`).then(e=>e.json()).then(t=>{"string"==typeof t.description?e.description=t.description:"object"==typeof t.description&&void 0!==t.description?e.description=t.description.value:e.description="no description found"})}async function c(e){await s(e);let t=document.createElement("div");t.className=" m-4 grid grid-cols-2 cursor-pointer items-center rounded-lg border border-gray-200 bg-white shadow hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 md:max-w-xl sm:text-sm";let r=document.createElement("img");r.className="h-48 w-32 rounded-l-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-s-lg ",r.src=`https://covers.openlibrary.org/b/id/${e.coverId}-M.jpg`,r.alt=`${e.title}`;let n=document.createElement("div");n.classList="flex flex-col justify-between p-3 leading-normal dark:text-gray-200";let o=document.createElement("h3");o.textContent=`${e.title}`,o.classList="font-bold text-lg";let a=document.createElement("h4");e.authors[1]?a.textContent=`${e.authors.join(", ")}`:a.textContent=`${e.authors[0]}`,a.classList="font-semibold text-base";let l=document.createElement("h5");l.textContent=`${e.year}`;let d=document.createElement("div");d.className="col-span-2 break-words text-wrap text-justify hidden transition-all text-xs p-2 text-balance dark:text-gray-200";let c=document.createElement("p");c.className="text-balance",c.textContent=`${e.description}`,i.appendChild(t),t.appendChild(r),t.appendChild(n),n.appendChild(o),n.appendChild(a),n.appendChild(l),t.appendChild(d),d.appendChild(c),t.addEventListener("click",()=>{d.classList.contains("hidden")?d.classList.remove("hidden"):d.classList.add("hidden")})}function p(){var e;let t=document.createElement("div");t.className="my-20 flex w-40 flex-col items-center justify-center md:w-56 lg:col-span-2";let r=document.createElement("img");r.src=(e=o)&&e.__esModule?e.default:e;let n=document.createElement("h1");n.textContent="Nessun libro trovato",n.className="whitespace-nowrap text-xl font-bold md:text-2xl",i.appendChild(t),t.appendChild(r),t.appendChild(n)}l.addEventListener("click",e=>{e.preventDefault();let t=document.getElementById("loader");t.style.display="block",d().then(e=>(t.style.display="none",0==e.length?p():e.forEach(e=>{c(e)}))).catch(e=>(t.style.display="none",p(),console.error("Errore nel caricamento dei libri",e)))});
//# sourceMappingURL=index.04765434.js.map
